name: Pipeline de Testes
on:
  pull_request:
    branches:
      - main
  workflow_dispatch:

jobs:
  trivy:
    name: Análise Trivy
    runs-on: ubuntu-latest
    steps:
      - name: Executando análise Trivy
        run: |
          echo "Rodando análise Trivy"

  unit-tests:
    needs: [trivy]
    name: Testes Unitários
    runs-on: ubuntu-latest
    steps:
      - name: Executando testes unitários
        run: |
          echo "Rodando testes unitários"
  integration-tests:
    needs: [unit-tests]
    name: Testes de Integração
    runs-on: ubuntu-latest
    steps:
      - name: Executando testes de integração
        run: |
          echo "Rodando testes de integração"
  sonarqube:
    needs: [unit-tests]
    name: Análise SonarQube
    runs-on: ubuntu-latest
    steps:
      - name: Executando análise SonarQube
        run: |
          echo "Rodando análise SonarQube"